(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(t,e,a){t.exports=a(229)},165:function(t,e,a){},229:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(45),r=a(121),i=a(28),l=a(3),u=a.n(l),s=(a(147),a(134)),d=a(40),m=a(55),p=a(32),h=a.n(p),f="GET_ITEMS",E="ADD_ITEM",b="DELETE_ITEM",y="SELECT_ITEM",g="CHANGE_ITEM_STATUS",O={items:[],currentItem:{}};var j,k,I,v,C=Object(o.c)({todolist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:case E:return Object(m.a)({},t,{items:e.payload});case g:return Object(m.a)({},t,{items:e.payload.data,currentItem:Object(m.a)({},e.payload.currentItem,{status:e.payload.status})});case b:return Object(m.a)({},t,{items:e.payload,currentItem:{}});case y:return Object(m.a)({},t,{currentItem:e.payload});default:return t}}}),T=(a(165),a(24)),_=a(25),S=a(29),w=a(26),L=a(33),M=a(30),D=a(231),A=a(234),x=a(235),H=a(101),V=a(233),G=Object(i.b)(function(t){return t.todolist},{addItemToList:function(t){return function(e){h.a.post("/todolist/additem",t).then(function(t){200===t.status&&0===t.data.code&&e({type:"ADD_ITEM",payload:t.data.data.length>0?t.data.data:[]})}).catch(function(t){console.log(t)})}}})(j=function(t){function e(t){var a;return Object(T.a)(this,e),(a=Object(S.a)(this,Object(w.a)(e).call(this,t))).state={inputValue:""},a.handleChange=a.handleChange.bind(Object(L.a)(a)),a.handleClick=a.handleClick.bind(Object(L.a)(a)),a}return Object(M.a)(e,t),Object(_.a)(e,[{key:"handleChange",value:function(t){this.setState({inputValue:t.target.value})}},{key:"handleClick",value:function(t){var e=this.state.inputValue;if(this.setState({inputValue:""}),e.length>0){var a={time:(new Date).toLocaleString(),title:e,content:"\u8bf7\u8f93\u5165\u4fbf\u7b7e\u5185\u5bb9",status:"todo"};this.props.addItemToList(a)}}},{key:"render",value:function(){var t=this;return c.a.createElement(A.a,null,c.a.createElement(x.a,{span:2}),c.a.createElement(x.a,{span:16},c.a.createElement(V.a,{type:"text",value:this.state.inputValue,onChange:function(e){return t.handleChange(e)}})),c.a.createElement(x.a,{span:4},c.a.createElement(H.a,{type:"primary",onClick:function(){return t.handleClick(t.props.getItemList)}},"\u6dfb\u52a0\u5f85\u5b8c\u6210\u4e8b\u4ef6")),c.a.createElement(x.a,{span:2}))}}]),e}(c.a.Component))||j,B=a(232),N=a(11),J=B.a.SubMenu,K=Object(i.b)(function(t){return t.todolist},{selectCurrentItem:function(t){return function(e){e({type:"SELECT_ITEM",payload:t})}}})(k=function(t){function e(t){var a;return Object(T.a)(this,e),(a=Object(S.a)(this,Object(w.a)(e).call(this,t))).handleItemClick=a.handleItemClick.bind(Object(L.a)(a)),a}return Object(M.a)(e,t),Object(_.a)(e,[{key:"handleItemClick",value:function(t){this.props.selectCurrentItem(t)}},{key:"render",value:function(){var t=this;console.log(this.props);var e=this.props.items,a=e.filter(function(t){return"todo"===t.status}),n=e.filter(function(t){return"todo"!==t.status});return c.a.createElement(D.a.Sider,{width:200,style:{background:"#fff"}},c.a.createElement(B.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},c.a.createElement(J,{key:"todoitems",title:c.a.createElement("span",null,c.a.createElement(N.a,{type:"laptop"}),"\u5f85\u529e\u4fbf\u7b7e")},a.map(function(e){return c.a.createElement(B.a.Item,{key:e._id,onClick:function(){return t.handleItemClick(e)}},e.title)})),c.a.createElement(J,{key:"sub3",title:c.a.createElement("span",null,c.a.createElement(N.a,{type:"notification"}),"\u5df2\u5b8c\u6210\u4fbf\u7b7e")},n.map(function(e){return c.a.createElement(B.a.Item,{key:e._id,onClick:function(){return t.handleItemClick(e)}},e.title)}))))}}]),e}(c.a.Component))||k,U=Object(i.b)(function(t){return t.todolist},{changeItemStatus:function(t){return function(e){h.a.post("/todolist/updateitem",{_id:t._id,status:t.status}).then(function(a){200===a.status&&0===a.data.code&&e({type:"CHANGE_ITEM_STATUS",payload:{data:a.data.data||[],currentItem:t,status:"todo"===t.status?"done":"todo"}})}).catch(function(t){console.log(t)})}},deleteItem:function(t){return function(e){h.a.post("/todolist/deleteitem",{_id:t._id}).then(function(t){200===t.status&&0===t.data.code&&e({type:"DELETE_ITEM",payload:t.data.data||[]})}).catch(function(t){console.log(t)})}}})(I=function(t){function e(t){return Object(T.a)(this,e),Object(S.a)(this,Object(w.a)(e).call(this,t))}return Object(M.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){var t=this;console.log(this.props);var e=this.props.currentItem;return c.a.createElement(D.a,{style:{padding:"0 24px 24px"}},c.a.createElement(D.a.Header,{style:{background:"#f0f2f5",padding:0}},e.title?c.a.createElement(A.a,null,c.a.createElement(x.a,{span:18},e.title?e.title:""),c.a.createElement(x.a,{span:3},c.a.createElement(H.a,{onClick:function(){return t.props.changeItemStatus(e)}},"todo"===e.status?"\u4fbf\u7b7e\u5b8c\u6210":"\u4fbf\u7b7e\u672a\u5b8c\u6210")),c.a.createElement(x.a,{span:3},c.a.createElement(H.a,{onClick:function(){return t.props.deleteItem(e)}},"\u5220\u9664\u4fbf\u7b7e"))):null),c.a.createElement(D.a.Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},e.content?e.content:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u4fbf\u7b7e"))}}]),e}(c.a.Component))||I,W=Object(i.b)(function(t){return t.todolist},{getTodoList:function(){return function(t){h.a.get("/todolist/allitems").then(function(e){200===e.status&&0===e.data.code&&t({type:"GET_ITEMS",payload:e.data.data.length>0?e.data.data:[]})})}}})(v=function(t){function e(t){var a;return Object(T.a)(this,e),(a=Object(S.a)(this,Object(w.a)(e).call(this,t))).state={items:[],currentItem:{}},a.getItemList=a.getItemList.bind(Object(L.a)(a)),a}return Object(M.a)(e,t),Object(_.a)(e,[{key:"getItemList",value:function(){var t=this;h.a.get("/todolist/allitems").then(function(e){200===e.status&&0===e.data.code&&t.setState({items:e.data.data.length>0?e.data.data:[]})}).catch(function(t){console.log(t)})}},{key:"componentDidMount",value:function(){this.props.getTodoList()}},{key:"render",value:function(){var t=this;return c.a.createElement(D.a,null,c.a.createElement(D.a.Header,{className:"header"},c.a.createElement(A.a,null,c.a.createElement(x.a,{span:2},c.a.createElement(H.a,{onClick:function(){return t.props.history.push("/edit")}},"\u7f16\u8f91\u9875\u9762")),c.a.createElement(x.a,{span:22},c.a.createElement(G,null)))),c.a.createElement(D.a,null,c.a.createElement(K,null),c.a.createElement(U,null)))}}]),e}(c.a.Component))||v,R=function(t){function e(){return Object(T.a)(this,e),Object(S.a)(this,Object(w.a)(e).apply(this,arguments))}return Object(M.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){var t=this;return c.a.createElement("div",null,c.a.createElement("h1",null,"\u8fd9\u662f\u7f16\u8f91\u9875\u9762"),c.a.createElement(H.a,{onClick:function(){return t.props.history.goBack()}},"\u8fd4\u56de"))}}]),e}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=Object(o.d)(C,Object(o.a)(r.a));u.a.render(c.a.createElement(i.a,{store:$},c.a.createElement(s.a,null,c.a.createElement(d.a,{path:"/",exact:!0,component:W}),c.a.createElement(d.a,{path:"/edit",component:R}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[138,1,2]]]);
//# sourceMappingURL=main.c63a15a6.chunk.js.map